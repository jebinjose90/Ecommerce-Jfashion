<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>
        <%= title %>
    </title>
</head>
<style>
    body {
        font-family: Arial, sans-serif;
    }

    .foot {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        padding: 20px;
        background-color: #000000;
    }

    .com_name {
        font-size: 24px;
        font-weight: bold;
        color: #ffffff;
    }

    .all_rights {
        display: flex;
        justify-content: center;
        padding: 10px;
        color: white;
    }

    .custom-div2 {
        height: 400px;
        width: 100%;
        background-color: #6badeb;
        /* Light Blue Background Color */
        color: white;
        /* White Text Color */
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .custom-div2 p {
        font-weight: bold;
        font-size: 3rem;
        line-height: 0.8;
        /* Adjust the font size as needed */
    }

    .custom-div2 p.small {
        font-size: 30px;
        font-weight: lighter;
        line-height: 0.8;
    }

    .custom-link {
        color: black;
    }

    .custom-link:hover {
        color: black;
    }

    .custom-input {
        border: none;
        outline: none;
        box-shadow: none;
        outline-width: 0;
    }

    .white-curved-div {
        background-color: white;
        height: 5.5rem;
        width: 40%;
        border-radius: 20px;
    }

    .dropdown-item:focus,
    .dropdown-item:hover {
        background-color: transparent;
        color: #000000;
        /* Change the color to your preferred text color */
    }

    .product-grid {
        font-family: 'Poppins', sans-serif;
    }
    .product-grid {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .product-content {
        text-align: left;
        margin-top: 10px; /* Adjust as needed */
    }

    .pagination {
        margin-top: 20px; /* Adjust as needed */
    }

    .product-grid .product-image {
        overflow: hidden;
        position: relative;
        z-index: 1;
    }

    .product-grid .product-image a.image {
        display: block;
    }

    .product-grid .product-image img {
        width: 100%;
        height: auto;
    }

    .product-grid .product-image .img-1 {
        transition: all 0.3s ease 0s;
    }

    .product-grid:hover .product-image .img-1 {
        opacity: 0;
    }

    .product-grid .product-image .img-2 {
        width: 100%;
        height: 100%;
        opacity: 0;
        backface-visibility: hidden;
        position: absolute;
        left: 0;
        top: 0;
        z-index: -1;
        transition: all 0.3s ease 0s;
    }

    .product-grid:hover .product-image .img-2 {
        opacity: 1;
    }

    .product-grid .product-hot-label,
    .product-grid .product-discount-label {
        color: #fff;
        background: #ff6f00;
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
        padding: 3px 10px;
        position: absolute;
        top: 10px;
        left: 10px;
    }

    .product-grid .product-discount-label {
        background: #ff3939;
        left: auto;
        right: 10px;
    }

    .product-grid .product-view {
        color: #fff;
        background: #000;
        font-size: 16px;
        text-align: right;
        line-height: 50px;
        width: 60px;
        height: 60px;
        padding: 0 16px 0 0;
        border-radius: 50px;
        opacity: 0;
        transform: scale(0);
        position: absolute;
        bottom: -40px;
        left: -40px;
        transition: all .3s ease;
    }

    .product-grid:hover .product-view {
        opacity: 1;
        transform: scale(1);
        bottom: -20px;
        left: -20px;
    }

    .product-grid .product-view:hover {
        background: #ff6f00;
    }

    .product-grid .product-links {
        padding: 0;
        margin: 0;
        list-style: none;
        transform: translateY(50%);
        position: absolute;
        bottom: 50%;
        right: 10px;
        z-index: 1;
    }

    .product-grid .product-links li {
        margin: 5px 0;
        opacity: 0;
        transform: translateX(100%);
        transition: all .3s ease;
    }

    .product-grid .product-links li:nth-child(2) {
        transition-delay: .1s;
    }

    .product-grid .product-links li:nth-child(3) {
        transition-delay: .2s;
    }

    .product-grid:hover .product-links li {
        opacity: 1;
        transform: translateX(0);
    }

    .product-grid .product-links li a {
        color: #000;
        background: #fff;
        font-size: 18px;
        text-align: center;
        line-height: 33px;
        width: 35px;
        height: 35px;
        border: 1px solid #000;
        display: block;
        transition: all .3s ease;
    }

    .product-grid .product-links li a:hover {
        color: #fff;
        background: #ff6f00;
        border-color: #ff6f00;
    }

    .product-grid .product-content {
        background: #fff;
        margin-left: -120px
    }

    .product-grid .rating {
        color: #f7bc3d;
        font-size: 11px;
        padding: 0;
        margin: 0 0 8px;
        list-style: none;
    }

    .product-grid .rating li {
        display: inline-block;
    }

    .product-grid .rating .disable {
        color: #a3a3a3;
    }

    .product-grid .title {
        font-size: 15px;
        font-weight: 500;
        text-transform: capitalize;
        margin: 0 0 8px;
    }

    .product-grid .title a {
        color: #333;
        transition: all 0.3s ease 0s;
    }

    .product-grid .title a:hover {
        color: #ff6f00;
    }

    .product-grid .price {
        color: #a3a3a3;
        font-size: 15px;
        font-weight: 500;
    }

    .product-grid .price span {
        color: #999;
        font-size: 14px;
        font-weight: 400;
        text-decoration: line-through;
        margin-right: 5px;
    }

    @media screen and (max-width: 990px) {
        .product-grid {
            margin-bottom: 30px;
        }
    }

    .pagination .page-item.active .page-link {
        background-color: #343a40;
        /* Dark color for selection */
        border-color: #343a40;
        /* Matching border color */
        color: #fff;
        /* Text color for active page */
    }

    .pagination .page-item .page-link {
        color: #343a40;
        /* Text color for other pages */
    }
</style>
<%- include('include/nav_bar_main_style') %>

    <body>

        <%- include('include/nav_bar_main') %>
        
            <div class="container-fluid">
            <hr class="my-4 mt-1" style="border-color: gray;">
            <% if(typeof message!=='undefined' && message !==null) { %>
                <div class="alert alert-info text-center rounded-0 mt-1 mb-1 ms-2 me-2 fs-6">
                    <%= message %>
                </div>
                <% } %>
            <div class="row">
                <% if(productDetails.length> 0) { %>
                    <% productDetails.forEach(function(productDetail, index) { %>
                        <div class="col-md-3">
                            <div class="product-grid">
                                <div class="product-image" style="width: 250px; height: 300px;">
                                    <a href="/item/<%= productDetail.product_id %>/<%= productDetail._id %>/<%= productDetail.category_id._id %>" class="image" style="width: 250px; height: 300px;">
                                        <img class="img-1" src="<%= productDetail.image[0] %>"
                                            style="width: 250px; height: 300px;">
                                        <img class="img-2" src="<%= productDetail.image[0] %>"
                                            style="width: 250px; height: 300px;">
                                    </a>
                                    <ul class="product-links">
                                        <li><a><i class="fa fa-trash" id="delete" onclick="deleteItemFromWishlist('<%= productDetail._id %>')"></i></a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="product-content">
                                    <ul class="rating">
                                        <li class="fa fa-star"></li>
                                        <li class="fa fa-star"></li>
                                        <li class="fa fa-star"></li>
                                        <li class="fa fa-star"></li>
                                        <li class="fa fa-star disable"></li>
                                        <li class="disable">(1 reviews)</li>
                                    </ul>
                                    <h3 class="title"><a href="/product/<%= productDetail._id %>">
                                            <%= productDetail.product_name %>
                                        </a></h3>
                                    <div class="price">
                                        <%= currency %>:<%= productDetail.price %>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <% }); %>
                            <% } %>

            </div>
            </div>

            <nav aria-label="Page navigation example" class="d-flex justify-content-center mt-3">
                <ul class="pagination">
                    <% if (currentPage> 1) { %>
                        <li class="page-item disabled">
                            <a class="page-link" href="?page=<%= currentPage - 1 %>" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <% } %>
                            <% for (let i=1; i <=totalPages; i++) { %>
                                <li class="<%= i === currentPage ? 'page-item active' : 'page-item' %>"><a
                                        class="page-link" href="?page=<%= i %>">
                                        <%= i %>
                                    </a></li>
                                <% } %>
                                    <% if (currentPage < totalPages) { %>
                                        <li class="page-item">
                                            <a class="page-link" href="?page=<%= currentPage + 1 %>" aria-label="Next">
                                                <span aria-hidden="true">&raquo;</span>
                                            </a>
                                        </li>
                                        <% } %>
                </ul>
            </nav>

            <div class="container marketing mt-5">
                <div class="row">
                    <div class="col-12 text-left mb-4">
                        <h1 class="display-4 text-dark">YOUNG'S FAVOURITE</h1>
                    </div>
                </div>
                <!-- Three columns of text below the carousel -->
                <div class="container marketing mt-5">
                    <div class="row mx-auto">
                        <div class="col-lg-6">
                            <img class="company-icon-container" src="/img/sli1.png" alt="Generic placeholder image"
                                width="480" height="330">
                            <h2>Trending on instagram</h2>
                            <p>Explore Now!</p>
                            <p><a class="btn btn-secondary" href="#" role="button">View details »</a></p>
                        </div><!-- /.col-lg-4 -->
                        <div class="col-lg-6">
                            <img class="company-icon-container" src="/img/sli2.png" alt="Generic placeholder image"
                                width="480" height="330">
                            <h2>All Under Rs 2000</h2>
                            <p>Explore Now!</p>
                            <p><a class="btn btn-secondary" href="#" role="button">View details »</a></p>
                        </div><!-- /.col-lg-4 -->
                    </div><!-- /.row -->
                </div><!-- /.container -->
            </div>

            <div class="custom-div2 d-flex">
                <div style="width:50%">
                    <p style="font-weight: bold; text-align: center;">JOIN SHOPPING COMMUNITY TO GET MONTHLY PROMO</p>
                </div>
                <p class="small">Type our email down below and be young wild generation</p>
                <div class="white-curved-div d-flex justify-content-between align-items-center p-2">
                    <input type="text" class="form-control custom-input" placeholder="Add your email here"
                        style="width: 65%; font-size: 20px; margin-left: 4px;" />
                    <button class="btn btn-dark"
                        style="width: 30%; height: 90%; margin-right: 4px; font-size: 20px; border-radius: 15px;">SEND</button>
                </div>
            </div>

            <div class="foot d-flex">
                <div class="com_name mr-auto">JFASHION</div>

                <div class="all_rights mr-auto mt-4">
                    <p>&copy; 2022 JFASHION. All rights reserved.</p>
                </div>
            </div>

            <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
            <script>
                function deleteItemFromWishlist(productId) {
                    const queryString = `productId=${productId}`;
                    const url = `/deleteFromWishlist?${queryString}`;
            
                    // Use window.confirm to show a confirmation dialog
                    const userConfirmed = window.confirm('Are you sure you want to delete this item from the wishlist?');
            
                    // If the user confirmed, proceed with the fetch and page reload
                    if (userConfirmed) {
                        fetch(url, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ key: 'value' }) // Replace with your actual payload
                        })
                        .then(response => response.json())
                        .then(data => {
                            console.log('Data received:', data);
                            // Optionally, check if the deletion was successful before reloading
                            if (data && data.message !== 'error') {
                                // Reload the page if the deletion was successful
                                location.reload();
                            } else {
                                // Handle the case where the deletion was not successful
                                console.error('Error deleting item from wishlist:', data.message);
                            }
                        })
                        .catch(error => console.error('Error:', error));
                    } else {
                        // If the user cancels, prevent the default action (e.g., following a link or submitting a form)
                        console.log('Deletion canceled by the user.');
                    }
                }
            </script>
            <%- include('include/nav_bar_main_script') %>
    </body>

</html>